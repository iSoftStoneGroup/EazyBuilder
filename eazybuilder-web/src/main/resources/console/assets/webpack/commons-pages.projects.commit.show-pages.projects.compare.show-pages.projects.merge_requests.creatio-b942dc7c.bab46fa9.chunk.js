(this.webpackJsonp=this.webpackJsonp||[]).push([[60],{"1ZpL":function(e,t,i){var n,s,o;
/*! waitForImages jQuery Plugin - v2.1.0 - 2016-01-04
* https://github.com/alexanderdickson/waitForImages
* Copyright (c) 2016 Alex Dickson; Licensed MIT */s=[i("EmJ/")],void 0===(o="function"==typeof(n=function(e){e.waitForImages={hasImageProperties:["backgroundImage","listStyleImage","borderImage","borderCornerImage","cursor"],hasImageAttributes:["srcset"]},e.expr[":"]["has-src"]=function(t){return e(t).is('img[src][src!=""]')},e.expr[":"].uncached=function(t){return!!e(t).is(":has-src")&&!t.complete},e.fn.waitForImages=function(){var t,i,n,s=0,o=0,a=e.Deferred();if(e.isPlainObject(arguments[0])?(n=arguments[0].waitForAll,i=arguments[0].each,t=arguments[0].finished):1===arguments.length&&"boolean"===e.type(arguments[0])?n=arguments[0]:(t=arguments[0],i=arguments[1],n=arguments[2]),t=t||e.noop,i=i||e.noop,n=!!n,!e.isFunction(t)||!e.isFunction(i))throw new TypeError("An invalid callback was supplied.");return this.each((function(){var r=e(this),c=[],l=e.waitForImages.hasImageProperties||[],d=e.waitForImages.hasImageAttributes||[],h=/url\(\s*(['"]?)(.*?)\1\s*\)/g;n?r.find("*").addBack().each((function(){var t=e(this);t.is("img:has-src")&&!t.is("[srcset]")&&c.push({src:t.attr("src"),element:t[0]}),e.each(l,(function(e,i){var n,s=t.css(i);if(!s)return!0;for(;n=h.exec(s);)c.push({src:n[2],element:t[0]})})),e.each(d,(function(e,i){if(!t.attr(i))return!0;c.push({src:t.attr("src"),srcset:t.attr("srcset"),element:t[0]})}))})):r.find("img:has-src").each((function(){c.push({src:this.src,element:this})})),s=c.length,o=0,0===s&&(t.call(r[0]),a.resolveWith(r[0])),e.each(c,(function(n,c){var l=new Image,d="load.waitForImages error.waitForImages";e(l).one(d,(function n(l){var h=[o,s,"load"==l.type];if(o++,i.apply(c.element,h),a.notifyWith(c.element,h),e(this).off(d,n),o==s)return t.call(r[0]),a.resolveWith(r[0]),!1})),c.srcset&&(l.srcset=c.srcset),l.src=c.src}))})),a.promise()}})?n.apply(t,s):n)||(e.exports=o)},DN5t:function(e,t,i){"use strict";i.d(t,"a",(function(){return U}));i("pBsb"),i("orcL");var n=i("EmJ/"),s=i.n(n),o=i("XRO8"),a=i("2ibD"),r=i("/lV4"),c=i("06tH"),l=i.n(c);const d=".".concat("diff-line-num",", .line_content");var h={init(e){var t=this;this.userCanCreateNote||(this.userCanCreateNote=""===e.closest(".files").data("canCreateNote")),this.isParallelView="parallel"===l.a.get("diff_view"),this.userCanCreateNote&&e.on("mouseover",d,(function(e){return t.showButton(t.isParallelView,e)})).on("mouseleave",d,(function(e){return t.hideButton(t.isParallelView,e)}))},showButton(e,t){const i=this.getButtonParent(t.currentTarget,e);this.validateButtonParent(i)&&(i.classList.add("is-over"),i.nextElementSibling.classList.add("is-over"))},hideButton(e,t){const i=this.getButtonParent(t.currentTarget,e);i.classList.remove("is-over"),i.nextElementSibling.classList.remove("is-over")},getButtonParent(e,t){if(t){if(!e.classList.contains("diff-line-num"))return e.previousElementSibling}else if(!e.classList.contains("old_line"))return e.parentNode.querySelector(".".concat("old_line"));return e},validateButtonParent:e=>!(e.classList.contains("empty-cell")||e.classList.contains("js-unfold")||e.classList.contains("no-comment-btn")||e.parentNode.classList.contains("diff-expanded"))};i("S26F"),i("1ZpL");const u=900,g=["two-up","swipe"];class f{constructor(e){var t,i,n,o=this;n={"two-up":function(){var e=this;return s()(".two-up.view .wrap",this.file).each((function(t,i){return s()("img",i).each((function(){if(s()(this).width()>u/2)return s()(this).width(u/2)})),e.requestImageInfo(s()("img",i),(function(e,t){return s()(".image-info .meta-width",i).text("".concat(e,"px")),s()(".image-info .meta-height",i).text("".concat(t,"px")),s()(".image-info",i).removeClass("gl-display-none")}))}))},swipe(){var e=this;let t=0,i=0;return s()(".swipe.view",this.file).each((function(n,o){const a=f.prepareFrames(o);[t,i]=a;const r=s()(".swipe-frame",o),c=s()(".swipe-wrap",o),l=s()(".swipe-bar",o);r.css({width:t+16,height:i+28}),c.css({width:t+1,height:i+2}),l.css({left:1});const d=parseInt(c.css("right").replace("px",""),10);e.initDraggable(l,d,(function(e,i){i>0&&i<r.width()-2*d&&(c.width(t+1-i),l.css("left",i))}))}))},"onion-skin":function(){var e=this;let t,i;i=0,t=0;const n=s()(".drag-track",this.file).width()-s()(".dragger",this.file).width();return s()(".onion-skin.view",this.file).each((function(o,a){const r=f.prepareFrames(a);[i,t]=r;const c=s()(".onion-skin-frame",a),l=s()(".frame.added",a),d=s()(".drag-track",a),h=s()(".dragger",d);c.css({width:i+16,height:t+28}),s()(".swipe-wrap",a).css({width:i+1,height:t+2}),h.css({left:n}),l.css("opacity",1);const u=parseInt(l.css("right").replace("px",""),10);e.initDraggable(h,u,(function(e,t){const i=t/n;i>=0&&i<=1&&(h.css("left",t),l.css("opacity",i))}))}))}},(i="views")in(t=this)?Object.defineProperty(t,i,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[i]=n,this.file=e,this.requestImageInfo(s()(".two-up.view .frame.deleted img",this.file),(function(){return o.requestImageInfo(s()(".two-up.view .frame.added img",o.file),(function(){o.initViewModes(),s()(".two-up.view img",o.file).waitForImages((function(){o.initView("two-up")}))}))}))}initViewModes(){var e=this;const t=g[0];return s()(".view-modes",this.file).removeClass("gl-display-none"),s()(".view-modes-menu",this.file).on("click","li",(function(t){if(!s()(t.currentTarget).hasClass("active"))return e.activateViewMode(t.currentTarget.className)})),this.activateViewMode(t)}activateViewMode(e){return s()(".view-modes-menu li",this.file).removeClass("active").filter(".".concat(e)).addClass("active"),s()(".view:visible:not(.".concat(e,")"),this.file).addClass("gl-display-none"),s()(".view.".concat(e),this.file).removeClass("gl-display-none"),this.initView(e)}initView(e){return this.views[e].call(this)}initDraggable(e,t,i){let n=!1;const o=s()("body"),a=e.parent(),r=function(){n=!0,o.css("user-select","none")},c=function(){n=!1,o.css("user-select","")},l=function(e){const s=(e.pageX||e.touches[0].pageX)-(a.offset().left+t);n&&i(e,s)};e.off("mousedown").off("touchstart").on("mousedown",r).on("touchstart",r),o.off("mouseup").off("mousemove").off("touchend").off("touchmove").on("mouseup",c).on("touchend",c).on("mousemove",l).on("touchmove",l)}static prepareFrames(e){let t=0,i=0;return s()(".frame",e).each((function(e,n){const o=s()(n).width(),a=s()(n).height();return t=o>t?o:t,i=a>i?a:i})).css({width:t,height:i}),[t,i]}requestImageInfo(e,t){var i=this;const n=e.get(0);if(n)return n.complete?t.call(this,n.naturalWidth,n.naturalHeight):e.on("load",(function(){return t.call(i,n.naturalWidth,n.naturalHeight)}))}}var m=i("NmEs");function p(e,t){let{x:i,y:n}=t,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];const o=document.createElement("button");return s.concat(["js-image-badge"]).forEach((function(e){return o.classList.add(e)})),o.setAttribute("type","button"),o.setAttribute("disabled",!0),o.dataset.noteId=e,o.style.left="".concat(i,"px"),o.style.top="".concat(n,"px"),o}function w(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function b(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?w(Object(i),!0).forEach((function(t){v(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):w(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function v(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function y(e,t){let{x:i,y:n}=t;const s=document.createElement("button");s.classList.add("btn-transparent"),s.classList.add("comment-indicator"),s.setAttribute("type","button"),s.style.left="".concat(i,"px"),s.style.top="".concat(n,"px"),s.innerHTML=Object(m.T)("image-comment-dark"),e.appendChild(s)}function O(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function I(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?O(Object(i),!0).forEach((function(t){C(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):O(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function C(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}const E={x:0,y:0,width:0,height:0};class S{constructor(e){const{noteId:t,discussionId:i}=e;this.actual=e.actual||E,this.browser=e.browser||E,this.noteId=t,this.discussionId=i,e.imageEl&&!e.browser&&(this.browser=j.resizeCoordinatesToImageElement(e.imageEl,this.actual))}}var j={addCommentIndicator:y,removeCommentIndicator:function(e){const t=e.querySelector(".comment-indicator"),i=e.querySelector("img"),n=Boolean(t);let s={};return n&&(s={x:parseInt(t.style.left,10),y:parseInt(t.style.top,10),image:{width:i.width,height:i.height}},t.remove()),b(b({},s),{},{removed:n})},showCommentIndicator:function(e,t){const{x:i,y:n}=t,s=e.querySelector(".comment-indicator");s?(s.style.left="".concat(i,"px"),s.style.top="".concat(n,"px")):y(e,t)},commentIndicatorOnClick:function(e){e.stopPropagation(),e.currentTarget.closest(".diff-viewer").querySelector(".note-container .note-textarea").focus()},addImageBadge:function(e,t){let{coordinate:i,badgeText:n,noteId:s}=t;const o=p(s,i,["badge","badge-pill"]);o.textContent=n,e.appendChild(o)},addImageCommentBadge:function(e,t){let{coordinate:i,noteId:n}=t;const s=p(n,i,["image-comment-badge"]);s.innerHTML=Object(m.T)("image-comment-dark"),e.appendChild(s)},addAvatarBadge:function(e,t){const{noteId:i,badgeNumber:n}=t.detail,s=e.querySelector("#".concat(i," .badge"));s.textContent=n,s.classList.remove("hidden")},setPositionDataAttribute:function(e,t){const{x:i,y:n,width:s,height:o}=t,{position:a}=e.dataset,r=I(I({},JSON.parse(a)),{},{x:i,y:n,width:s,height:o});e.setAttribute("data-position",JSON.stringify(r))},updateDiscussionAvatarBadgeNumber:function(e,t){e.querySelector(".image-diff-avatar-link .badge").textContent=t},updateDiscussionBadgeNumber:function(e,t){e.querySelector(".badge").textContent=t},toggleCollapsed:function(e){const t=e.currentTarget.closest(".discussion-notes"),i=t.querySelector(".discussion-form"),n=t.classList.contains("collapsed");n?t.classList.remove("collapsed"):t.classList.add("collapsed"),i&&!n?i.style.display="none":i&&n&&(i.style.display="block")},resizeCoordinatesToImageElement:function(e,t){const{x:i,y:n,width:s,height:o}=t,a=e.width,r=e.height,c=a/s,l=r/o;return{x:Math.round(i*c),y:Math.round(n*l),width:a,height:r}},generateBadgeFromDiscussionDOM:function(e,t){const i=JSON.parse(t.dataset.position),n=t.querySelector(".note");return new S({actual:i,imageEl:e.querySelector("img"),noteId:n.id,discussionId:t.dataset.discussionId})},getTargetSelection:function(e){const t=e.currentTarget.querySelector("img"),i=e.offsetX,n=e.offsetY,{width:s,height:o}=t,a=t.naturalWidth,r=t.naturalHeight,c=a/s,l=r/o,d=Math.max(0,i)&&Math.min(i,s),h=Math.max(0,n)&&Math.min(n,o);return{browser:{x:d,y:h,width:s,height:o},actual:{x:Math.round(d*c),y:Math.round(h*l),width:a,height:r}}}};function P(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function B(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?P(Object(i),!0).forEach((function(t){D(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):P(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function D(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}class k{constructor(e,t){this.el=e,this.canCreateNote=Boolean(t&&t.canCreateNote),this.renderCommentBadge=Boolean(t&&t.renderCommentBadge),this.$noteContainer=s()(".note-container",this.el),this.imageBadges=[]}init(){this.imageFrameEl=this.el.querySelector(".diff-file .js-image-frame"),this.imageEl=this.imageFrameEl.querySelector("img"),this.bindEvents()}bindEvents(){var e;this.imageClickedWrapper=this.imageClicked.bind(this),this.imageBlurredWrapper=j.removeCommentIndicator.bind(null,this.imageFrameEl),this.addBadgeWrapper=this.addBadge.bind(this),this.removeBadgeWrapper=this.removeBadge.bind(this),this.renderBadgesWrapper=this.renderBadges.bind(this),(e=this.imageEl).complete&&0!==e.naturalHeight?this.renderBadges():this.imageEl.addEventListener("load",this.renderBadgesWrapper),this.$noteContainer.on("click",".js-diff-notes-toggle",j.toggleCollapsed),s()(this.el).on("click",".comment-indicator",j.commentIndicatorOnClick),this.canCreateNote&&(this.el.addEventListener("click.imageDiff",this.imageClickedWrapper),this.el.addEventListener("blur.imageDiff",this.imageBlurredWrapper),this.el.addEventListener("addBadge.imageDiff",this.addBadgeWrapper),this.el.addEventListener("removeBadge.imageDiff",this.removeBadgeWrapper))}imageClicked(e){const t=e.detail,i=j.getTargetSelection(t),n=t.currentTarget;j.setPositionDataAttribute(n,i.actual),j.showCommentIndicator(this.imageFrameEl,i.browser)}renderBadges(){[...this.el.querySelectorAll(".note-container .discussion-notes .notes")].forEach(this.renderBadge.bind(this))}renderBadge(e,t){const i=j.generateBadgeFromDiscussionDOM(this.imageFrameEl,e);this.imageBadges.push(i);const n={coordinate:i.browser,noteId:i.noteId};if(this.renderCommentBadge)j.addImageCommentBadge(this.imageFrameEl,n);else{const e=B(B({},n),{},{badgeText:t+1});j.addImageBadge(this.imageFrameEl,e)}}addBadge(e){const{x:t,y:i,width:n,height:s,noteId:o,discussionId:a}=e.detail,r=this.imageBadges.length+1,c=new S({actual:{x:t,y:i,width:n,height:s},imageEl:this.imageFrameEl.querySelector("img"),noteId:o,discussionId:a});this.imageBadges.push(c),j.addImageBadge(this.imageFrameEl,{coordinate:c.browser,badgeText:r,noteId:o}),j.addAvatarBadge(this.el,{detail:{noteId:o,badgeNumber:r}});const l=this.el.querySelector("#discussion_".concat(a));j.updateDiscussionBadgeNumber(l,r)}removeBadge(e){var t=this;const{badgeNumber:i}=e.detail,n=i-1,s=this.imageFrameEl.querySelectorAll(".badge");this.imageBadges.length!==i&&this.imageBadges.forEach((function(e,i){if(i>n){const{discussionId:n}=e,o=i,a=t.el.querySelector("#discussion_".concat(n));s[i].textContent=o,j.updateDiscussionBadgeNumber(a,o),j.updateDiscussionAvatarBadgeNumber(a,o)}})),this.imageBadges.splice(n,1),s[n].remove()}}const x={TWO_UP:"TWO_UP",SWIPE:"SWIPE",ONION_SKIN:"ONION_SKIN"};class N extends k{init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x.TWO_UP;this.imageFrameEls={[x.TWO_UP]:this.el.querySelector(".two-up .js-image-frame"),[x.SWIPE]:this.el.querySelector(".swipe .js-image-frame"),[x.ONION_SKIN]:this.el.querySelector(".onion-skin .js-image-frame")};const t=this.el.querySelector(".view-modes-menu");this.viewModesEls={[x.TWO_UP]:t.querySelector(".two-up"),[x.SWIPE]:t.querySelector(".swipe"),[x.ONION_SKIN]:t.querySelector(".onion-skin")},this.currentView=e,this.generateImageEls(),this.bindEvents()}generateImageEls(){var e=this;this.imageEls={},Object.getOwnPropertyNames(x).forEach((function(t){e.imageEls[t]=e.imageFrameEls[t].querySelector("img")}))}bindEvents(){super.bindEvents(),this.changeToViewTwoUp=this.changeView.bind(this,x.TWO_UP),this.changeToViewSwipe=this.changeView.bind(this,x.SWIPE),this.changeToViewOnionSkin=this.changeView.bind(this,x.ONION_SKIN),this.viewModesEls[x.TWO_UP].addEventListener("click",this.changeToViewTwoUp),this.viewModesEls[x.SWIPE].addEventListener("click",this.changeToViewSwipe),this.viewModesEls[x.ONION_SKIN].addEventListener("click",this.changeToViewOnionSkin)}get imageEl(){return this.imageEls[this.currentView]}get imageFrameEl(){return this.imageFrameEls[this.currentView]}changeView(e){if(t=e,!Boolean(Object.getOwnPropertyNames(x).find((function(e){return e===t}))))return;var t;const i=j.removeCommentIndicator(this.imageFrameEl);this.currentView=e,[...this.imageFrameEl.querySelectorAll(".badge")].map((function(e){return e.remove()})),this.imageBadges=[],setTimeout(this.renderNewView.bind(this,i),250)}renderNewView(e){if(this.renderBadges(),e.removed){const t=j.resizeCoordinatesToImageElement(this.imageEl,{x:e.x,y:e.y,width:e.image.width,height:e.image.height});j.showCommentIndicator(this.imageFrameEl,t)}}}var T={initImageDiff:function(e,t,i){const n={canCreateNote:t,renderCommentBadge:i};let s;return new f(e),e.querySelector(".diff-file .js-single-image")?(s=new k(e,n)).init():e.querySelector(".diff-file .js-replaced-image")&&(s=new N(e,n)).init(),s}},F=i("3twG"),L=i("FYnm");const q='<div class="diff-content"></div>',W='<span class="spinner"></span>',V='<div class="nothing-here-block">'.concat(Object(m.T)("warning-solid","s16")," Could not load diff</div>"),A='<div class="nothing-here-block diff-collapsed">This diff is collapsed. <button class="click-to-expand btn btn-link">Click to expand it.</button></div>';class M{constructor(e){var t=this;this.file=e,this.toggleDiff=this.toggleDiff.bind(this),this.content=s()(".diff-content",this.file),this.$chevronRightIcon=s()(".diff-toggle-caret .chevron-right",this.file),this.$chevronDownIcon=s()(".diff-toggle-caret .chevron-down",this.file),this.diffForPath=this.content.find("[data-diff-for-path]").data("diffForPath"),this.isOpen=!this.diffForPath,this.diffForPath?(this.collapsedContent=this.content,this.loadingContent=s()(q).addClass("loading").html(W).hide(),this.content=null,this.collapsedContent.after(this.loadingContent),this.$chevronRightIcon.removeClass("gl-display-none")):(this.collapsedContent=s()(q).html(A).hide(),this.content.after(this.collapsedContent),this.$chevronDownIcon.removeClass("gl-display-none")),s()(".js-file-title, .click-to-expand",this.file).on("click",(function(e){t.toggleDiff(s()(e.target))}))}toggleDiff(e,t){if(e.hasClass("js-file-title")||e.hasClass("click-to-expand")||!(!e.closest(".diff-toggle-caret").length>0))if(this.isOpen=!this.isOpen,this.isOpen||this.hasError){if(!this.content)return this.$chevronDownIcon.removeClass("gl-display-none"),this.$chevronRightIcon.addClass("gl-display-none"),this.getContentHTML(t);this.collapsedContent.hide(),this.content.show(),this.$chevronDownIcon.removeClass("gl-display-none"),this.$chevronRightIcon.addClass("gl-display-none")}else this.content.hide(),this.$chevronRightIcon.removeClass("gl-display-none"),this.$chevronDownIcon.addClass("gl-display-none"),this.collapsedContent.show()}getContentHTML(e){var t=this;return this.collapsedContent.hide(),this.loadingContent.show(),a.a.get(this.diffForPath).then((function(i){let{data:n}=i;t.loadingContent.hide(),n.html?(t.content=s()(n.html),Object(L.a)(t.content)):(t.hasError=!0,t.content=s()(V)),t.collapsedContent.after(t.content);const o=s()(t.file);h.init(o);const a=o.closest(".files").is("[data-can-create-note]");T.initImageDiff(o[0],a),e&&e()})).catch((function(){Object(o.c)(Object(r.a)("An error occurred while retrieving diff"))}))}}const _=20;let $=!1;class U{constructor(){const e=s()(".files .diff-file");e.each((function(e,t){s.a.data(t,"singleFileDiff")||s.a.data(t,"singleFileDiff",new M(t))}));const t=document.getElementById("diffs");(!t||t&&t.dataset&&""!==t.dataset.isLocked)&&h.init(e);const i=s()(".files").first().get(0),n=i&&i.hasAttribute("data-can-create-note");e.each((function(e,t){return T.initImageDiff(t,n)})),$||(s()(document).on("click",".js-unfold",this.handleClickUnfold.bind(this)).on("click",".diff-line-num a",this.handleClickLineNum.bind(this)).on("mousedown","td.line_content.parallel",this.handleParallelLineDown.bind(this)),$=!0),Object(F.f)()&&this.highlightSelectedLine(),this.openAnchoredDiff()}handleClickUnfold(e){const t=s()(e.target),[i,n]=this.lineNumbers(t.parent()),c=n-i,l=t.hasClass("js-unfold-bottom");let d,h,u=!0;if(l){const e=n+1;d=e,h=e+_}else{const e=n-1;d=e-_,h=e;const i=this.lineNumbers(t.parent().prev())[1];d<=i+1&&(d=i+1,u=!1)}const g=t.parents(".diff-file"),f=g.data("blobDiffPath"),m={since:d,to:h,bottom:l,offset:c,unfold:u,view:g.data("view")};a.a.get(f,{params:m}).then((function(e){let{data:i}=e;return t.parent().replaceWith(i)})).catch((function(){return Object(o.c)(Object(r.a)("An error occurred while loading diff"))}))}openAnchoredDiff(e){var t=this;const i=Object(F.f)(),n=i&&i.split("_")[0];if(!n)return;const o=s()("#".concat(n)).closest(".diff-file");if(s()(".nothing-here-block:visible",o).length){const i=s()(".js-file-title, .click-to-expand",o);o.data("singleFileDiff").toggleDiff(i,(function(){t.highlightSelectedLine(),e&&e()}))}else e&&e()}handleClickLineNum(e){const t=s()(e.currentTarget).attr("href");e.preventDefault(),window.history.pushState?window.history.pushState(null,null,t):window.location.hash=t,this.highlightSelectedLine()}handleParallelLineDown(e){const t=s()(e.currentTarget),i=t.closest("table");i.removeClass("left-side-selected right-side-selected");const n=["left-side","right-side"].filter((function(e){return t.hasClass(e)}))[0];n&&i.addClass("".concat(n,"-selected"))}diffViewType(){return s()(".inline-parallel-buttons a.active").data("viewType")}lineNumbers(e){const t=e.find(".diff-line-num").toArray();return 2!==t.length?[0,0]:t.map((function(e){return parseInt(s()(e).data("linenumber"),10)||0}))}highlightSelectedLine(){const e=Object(F.f)(),t=s()(".diff-file");t.find(".hll").removeClass("hll"),e&&t.find("tr#".concat(e,":not(.match) td, td#").concat(e,', td[data-line-code="').concat(e,'"]')).addClass("hll")}}}}]);
//# sourceMappingURL=commons-pages.projects.commit.show-pages.projects.compare.show-pages.projects.merge_requests.creatio-b942dc7c.bab46fa9.chunk.js.map