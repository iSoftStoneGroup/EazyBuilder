(this.webpackJsonp=this.webpackJsonp||[]).push([[154],{248:function(e,t){},oVc2:function(e,t){},"rK/1":function(e,t,r){"use strict";var n=r("LLbv"),s=r("4lAS"),o={name:"ClipboardButton",directives:{GlTooltip:n.a},components:{GlButton:s.a},props:{text:{type:String,required:!0},gfm:{type:String,required:!1,default:null},title:{type:String,required:!0},tooltipPlacement:{type:String,required:!1,default:"top"},tooltipContainer:{type:[String,Boolean],required:!1,default:!1},tooltipBoundary:{type:String,required:!1,default:null},cssClass:{type:String,required:!1,default:null},category:{type:String,required:!1,default:"secondary"},size:{type:String,required:!1,default:"medium"}},computed:{clipboardText(){return null!==this.gfm?JSON.stringify({text:this.text,gfm:this.gfm}):this.text}}},a=r("tBpV"),i=Object(a.a)(o,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("gl-button",e._g({directives:[{name:"gl-tooltip",rawName:"v-gl-tooltip.hover.blur.viewport",value:{placement:e.tooltipPlacement,container:e.tooltipContainer,boundary:e.tooltipBoundary},expression:"{\n    placement: tooltipPlacement,\n    container: tooltipContainer,\n    boundary: tooltipBoundary,\n  }",modifiers:{hover:!0,blur:!0,viewport:!0}}],class:e.cssClass,attrs:{title:e.title,"data-clipboard-text":e.clipboardText,category:e.category,size:e.size,icon:"copy-to-clipboard","aria-label":e.__("Copy this value")}},e.$listeners),[e._t("default")],2)}),[],!1,null,null,null);t.a=i.exports},"x/Qu":function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"setClusterName",(function(){return Se})),r.d(n,"setEnvironmentScope",(function(){return Ie})),r.d(n,"setKubernetesVersion",(function(){return ke})),r.d(n,"createRole",(function(){return Pe})),r.d(n,"requestCreateRole",(function(){return Oe})),r.d(n,"createRoleSuccess",(function(){return Re})),r.d(n,"createRoleError",(function(){return xe})),r.d(n,"createCluster",(function(){return we})),r.d(n,"requestCreateCluster",(function(){return Te})),r.d(n,"createClusterSuccess",(function(){return je})),r.d(n,"createClusterError",(function(){return Ae})),r.d(n,"setRegion",(function(){return Le})),r.d(n,"setKeyPair",(function(){return De})),r.d(n,"setVpc",(function(){return Ne})),r.d(n,"setSubnet",(function(){return Ve})),r.d(n,"setRole",(function(){return He})),r.d(n,"setSecurityGroup",(function(){return Ge})),r.d(n,"setGitlabManagedCluster",(function(){return Me})),r.d(n,"setNamespacePerEnvironment",(function(){return Ke})),r.d(n,"setInstanceType",(function(){return qe})),r.d(n,"setNodeCount",(function(){return Be}));var s={};r.r(s),r.d(s,"subnetValid",(function(){return Ue}));var o=r("jB52"),a=r("yi8e"),i=r("NmEs"),l=r("SeSR"),c=r("l5WF"),u=r("PrLL"),d=r("s1D3"),p=r("MV2A"),g=r("30su"),m=r("4lAS"),f=(r("QifN"),r("59DU")),b=r.n(f),h=r("EmJ/"),_=r.n(h),v=r("7hrM"),y=r("4giJ"),C=r("99qW");const E=function(e){return b()(e)?[]:[].concat(e)},S=function(e,t){return e.map((function(e){return e[t]}))};var I={components:{DropdownButton:v.a,DropdownSearchInput:C.a,DropdownHiddenInput:y.a,GlIcon:d.a},props:{fieldName:{type:String,required:!1,default:""},placeholder:{type:String,required:!1,default:""},defaultValue:{type:String,required:!1,default:""},value:{type:[Object,Array,String],required:!1,default:function(){return null}},labelProperty:{type:String,required:!1,default:"name"},valueProperty:{type:String,required:!1,default:"value"},items:{type:Array,required:!1,default:function(){return[]}},loading:{type:Boolean,required:!1,default:!1},disabled:{type:Boolean,required:!1,default:!1},loadingText:{type:String,required:!1,default:""},disabledText:{type:String,required:!1,default:""},hasErrors:{type:Boolean,required:!1,default:!1},multiple:{type:Boolean,required:!1,default:!1},errorMessage:{type:String,required:!1,default:""},searchFieldPlaceholder:{type:String,required:!1,default:""},emptyText:{type:String,required:!1,default:""},searchFn:{type:Function,required:!1,default:function(e,t){return function(r){return r[t].toLowerCase().indexOf(e)>-1}}}},data:()=>({searchQuery:"",focusOnSearch:!1}),computed:{toggleText(){return this.loading&&this.loadingText?this.loadingText:this.disabled&&this.disabledText?this.disabledText:this.selectedItems.length?this.selectedItemsLabels:this.placeholder},results(){return this.getItemsOrEmptyList().filter(this.searchFn(this.searchQuery,this.labelProperty))},selectedItems(){const e=this.valueProperty,t=E(this.value);return this.getItemsOrEmptyList().filter((function(r){return t.some((function(t){return r[e]===t}))}))},selectedItemsLabels(){return S(this.selectedItems,this.labelProperty).join(", ")},selectedItemsValues(){return S(this.selectedItems,this.valueProperty).join(", ")}},mounted(){var e=this;_()(this.$refs.dropdown).on("shown.bs.dropdown",(function(){e.focusOnSearch=!0})).on("hidden.bs.dropdown",(function(){e.focusOnSearch=!1}))},beforeDestroy(){_()(this.$refs.dropdown).off()},methods:{getItemsOrEmptyList(){return this.items||[]},selectSingle(e){this.$emit("input",e[this.valueProperty])},selectMultiple(e){const t=E(this.value),r=e[this.valueProperty],n=t.indexOf(r);n>-1?t.splice(n,1):t.push(r),this.$emit("input",t)},isSelected(e){return this.selectedItems.includes(e)}}},k=r("tBpV"),P=Object(k.a)(I,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{ref:"dropdown",staticClass:"dropdown"},[r("dropdown-hidden-input",{attrs:{name:e.fieldName,value:e.selectedItemsValues}}),e._v(" "),r("dropdown-button",{class:{"border-danger":e.hasErrors},attrs:{"is-disabled":e.disabled,"is-loading":e.loading,"toggle-text":e.toggleText}}),e._v(" "),r("div",{staticClass:"dropdown-menu dropdown-select"},[r("dropdown-search-input",{attrs:{focused:e.focusOnSearch,"placeholder-text":e.searchFieldPlaceholder},model:{value:e.searchQuery,callback:function(t){e.searchQuery=t},expression:"searchQuery"}}),e._v(" "),r("div",{staticClass:"dropdown-content"},[r("ul",[e.results.length?e._e():r("li",[r("span",{staticClass:"js-empty-text menu-item"},[e._v(e._s(e.emptyText))])]),e._v(" "),e._l(e.results,(function(t){return r("li",{key:t.id},[e.multiple?r("button",{staticClass:"js-dropdown-item d-flex align-items-center",attrs:{type:"button"},on:{click:function(r){return r.stopPropagation(),r.preventDefault(),e.selectMultiple(t)}}},[r("gl-icon",{class:[{invisible:!e.isSelected(t)},"mr-1"],attrs:{name:"mobile-issue-close"}}),e._v(" "),e._t("item",[e._v(e._s(t.name))],{item:t})],2):r("button",{staticClass:"js-dropdown-item",attrs:{type:"button"},on:{click:function(r){return r.preventDefault(),e.selectSingle(t)}}},[e._t("item",[e._v(e._s(t.name))],{item:t})],2)])}))],2)])],1)],1),e._v(" "),e.hasErrors&&e.errorMessage?r("span",{class:["form-text js-eks-dropdown-error-message",{"text-danger":e.hasErrors,"text-muted":!e.hasErrors}]},[e._v(e._s(e.errorMessage))]):e._e()])}),[],!1,null,null,null).exports,O=r("/lV4");const R=[{name:"1.15",value:"1.15"},{name:"1.16",value:"1.16"},{name:"1.17",value:"1.17"},{name:"1.18",value:"1.18"},{name:"1.19",value:"1.19",default:!0}];function x(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function w(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?x(Object(r),!0).forEach((function(t){T(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):x(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const{mapState:j,mapActions:A}=Object(a.a)("roles"),{mapState:L,mapActions:D}=Object(a.a)("keyPairs"),{mapState:N,mapActions:V}=Object(a.a)("vpcs"),{mapState:H,mapActions:G}=Object(a.a)("subnets"),{mapState:M,mapActions:K}=Object(a.a)("securityGroups"),{mapState:q}=Object(a.a)("instanceTypes");var B={components:{ClusterFormDropdown:P,GlFormCheckbox:l.a,GlFormGroup:c.a,GlFormInput:u.a,GlIcon:d.a,GlLink:p.a,GlSprintf:g.a,GlButton:m.a},props:{gitlabManagedClusterHelpPath:{type:String,required:!0},namespacePerEnvironmentHelpPath:{type:String,required:!0},kubernetesIntegrationHelpPath:{type:String,required:!0},externalLinkIcon:{type:String,required:!0}},i18n:{kubernetesIntegrationHelpText:Object(O.e)("ClusterIntegration|Read our %{linkStart}help page%{linkEnd} on Kubernetes cluster integration."),roleDropdownHelpText:Object(O.e)("ClusterIntegration|Your service role is distinct from the provision role used when authenticating. It will allow Amazon EKS and the Kubernetes control plane to manage AWS resources on your behalf. To use a new role, first create one on %{linkStart}Amazon Web Services%{linkEnd}."),roleDropdownHelpPath:"https://docs.aws.amazon.com/eks/latest/userguide/service_IAM_role.html#create-service-role",regionInputLabel:Object(O.e)("ClusterIntegration|Cluster Region"),regionHelpText:Object(O.e)("ClusterIntegration|The region the new cluster will be created in. You must reauthenticate to change regions."),keyPairDropdownHelpText:Object(O.e)("ClusterIntegration|Select the key pair name that will be used to create EC2 nodes. To use a new key pair name, first create one on %{linkStart}Amazon Web Services%{linkEnd}."),keyPairDropdownHelpPath:"https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-key-pairs.html#having-ec2-create-your-key-pair",vpcDropdownHelpText:Object(O.e)("ClusterIntegration|Select a VPC to use for your EKS Cluster resources. To use a new VPC, first create one on %{linkStart}Amazon Web Services %{linkEnd}."),vpcDropdownHelpPath:"https://docs.aws.amazon.com/eks/latest/userguide/getting-started-console.html#vpc-create",subnetDropdownHelpText:Object(O.e)("ClusterIntegration|Choose the %{linkStart}subnets %{linkEnd} in your VPC where your worker nodes will run."),subnetDropdownHelpPath:"https://console.aws.amazon.com/vpc/home?#subnets",securityGroupDropdownHelpText:Object(O.e)("ClusterIntegration|Choose the %{linkStart}security group %{linkEnd} to apply to the EKS-managed Elastic Network Interfaces that are created in your worker node subnets."),securityGroupDropdownHelpPath:"https://console.aws.amazon.com/vpc/home?#securityGroups",instanceTypesDropdownHelpText:Object(O.e)("ClusterIntegration|Choose the worker node %{linkStart}instance type%{linkEnd}."),instanceTypesDropdownHelpPath:"https://aws.amazon.com/ec2/instance-types",gitlabManagedClusterHelpText:Object(O.e)("ClusterIntegration|Allow GitLab to manage namespace and service accounts for this cluster. %{linkStart}More information%{linkEnd}"),namespacePerEnvironmentHelpText:Object(O.e)("ClusterIntegration|Deploy each environment to its own namespace. Otherwise, environments within a project share a project-wide namespace. Note that anyone who can trigger a deployment of a namespace can read its secrets. If modified, existing environments will use their current namespaces until the cluster cache is cleared. %{linkStart}More information%{linkEnd}")},computed:w(w(w(w(w(w(w(w(w({},Object(a.f)(["clusterName","environmentScope","kubernetesVersion","selectedRegion","selectedKeyPair","selectedVpc","selectedSubnet","selectedRole","selectedSecurityGroup","selectedInstanceType","nodeCount","gitlabManagedCluster","namespacePerEnvironment","isCreatingCluster"])),Object(a.d)(["subnetValid"])),j({roles:"items",isLoadingRoles:"isLoadingItems",loadingRolesError:"loadingItemsError"})),L({keyPairs:"items",isLoadingKeyPairs:"isLoadingItems",loadingKeyPairsError:"loadingItemsError"})),N({vpcs:"items",isLoadingVpcs:"isLoadingItems",loadingVpcsError:"loadingItemsError"})),H({subnets:"items",isLoadingSubnets:"isLoadingItems",loadingSubnetsError:"loadingItemsError"})),M({securityGroups:"items",isLoadingSecurityGroups:"isLoadingItems",loadingSecurityGroupsError:"loadingItemsError"})),q({instanceTypes:"items",isLoadingInstanceTypes:"isLoadingItems",loadingInstanceTypesError:"loadingItemsError"})),{},{kubernetesVersions:()=>R,vpcDropdownDisabled(){return!this.selectedRegion},keyPairDropdownDisabled(){return!this.selectedRegion},subnetDropdownDisabled(){return!this.selectedVpc},securityGroupDropdownDisabled(){return!this.selectedVpc},createClusterButtonDisabled(){return!this.clusterName||!this.environmentScope||!this.kubernetesVersion||!this.selectedRegion||!this.selectedKeyPair||!this.selectedVpc||!this.subnetValid||!this.selectedRole||!this.selectedSecurityGroup||!this.selectedInstanceType||!this.nodeCount||this.isCreatingCluster},displaySubnetError(){var e;return Boolean(this.loadingSubnetsError)||1===(null===(e=this.selectedSubnet)||void 0===e?void 0:e.length)},createClusterButtonLabel(){return this.isCreatingCluster?Object(O.e)("ClusterIntegration|Creating Kubernetes cluster"):Object(O.e)("ClusterIntegration|Create Kubernetes cluster")},subnetValidationErrorText(){return this.loadingSubnetsError?Object(O.e)("ClusterIntegration|Could not load subnets for the selected VPC"):Object(O.e)("ClusterIntegration|You should select at least two subnets")}}),mounted(){this.fetchRoles(),this.setRegionAndFetchVpcsAndKeyPairs()},methods:w(w(w(w(w(w(w({},Object(a.c)(["createCluster","setClusterName","setEnvironmentScope","setKubernetesVersion","setRegion","setVpc","setSubnet","setRole","setKeyPair","setSecurityGroup","setInstanceType","setNodeCount","setGitlabManagedCluster","setNamespacePerEnvironment"])),V({fetchVpcs:"fetchItems"})),G({fetchSubnets:"fetchItems"})),A({fetchRoles:"fetchItems"})),D({fetchKeyPairs:"fetchItems"})),K({fetchSecurityGroups:"fetchItems"})),{},{setRegionAndFetchVpcsAndKeyPairs(){this.setVpc({vpc:null}),this.setKeyPair({keyPair:null}),this.setSubnet({subnet:[]}),this.setSecurityGroup({securityGroup:null}),this.fetchVpcs({region:this.selectedRegion}),this.fetchKeyPairs({region:this.selectedRegion})},setVpcAndFetchSubnets(e){this.setVpc({vpc:e}),this.setSubnet({subnet:[]}),this.setSecurityGroup({securityGroup:null}),this.fetchSubnets({vpc:e,region:this.selectedRegion}),this.fetchSecurityGroups({vpc:e,region:this.selectedRegion})}})},U=Object(k.a)(B,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{attrs:{name:"eks-cluster-configuration-form"}},[r("h4",[e._v("\n    "+e._s(e.s__("ClusterIntegration|Enter the details for your Amazon EKS Kubernetes cluster"))+"\n  ")]),e._v(" "),r("div",{staticClass:"mb-3"},[r("gl-sprintf",{attrs:{message:e.$options.i18n.kubernetesIntegrationHelpText},scopedSlots:e._u([{key:"link",fn:function(t){var n=t.content;return[r("gl-link",{attrs:{href:e.kubernetesIntegrationHelpPath}},[e._v("\n          "+e._s(n)+"\n        ")])]}}])})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"label-bold",attrs:{for:"eks-cluster-name"}},[e._v(e._s(e.s__("ClusterIntegration|Kubernetes cluster name")))]),e._v(" "),r("gl-form-input",{attrs:{id:"eks-cluster-name",value:e.clusterName},on:{input:function(t){return e.setClusterName({clusterName:t})}}})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"label-bold",attrs:{for:"eks-environment-scope"}},[e._v(e._s(e.s__("ClusterIntegration|Environment scope")))]),e._v(" "),r("gl-form-input",{attrs:{id:"eks-environment-scope",value:e.environmentScope},on:{input:function(t){return e.setEnvironmentScope({environmentScope:t})}}})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"label-bold",attrs:{for:"eks-kubernetes-version"}},[e._v(e._s(e.s__("ClusterIntegration|Kubernetes version")))]),e._v(" "),r("cluster-form-dropdown",{attrs:{"field-id":"eks-kubernetes-version","field-name":"eks-kubernetes-version",value:e.kubernetesVersion,items:e.kubernetesVersions,"empty-text":e.s__("ClusterIntegration|Kubernetes version not found")},on:{input:function(t){return e.setKubernetesVersion({kubernetesVersion:t})}}})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"label-bold",attrs:{for:"eks-role"}},[e._v(e._s(e.s__("ClusterIntegration|Service role")))]),e._v(" "),r("cluster-form-dropdown",{attrs:{"field-id":"eks-role","field-name":"eks-role",value:e.selectedRole,items:e.roles,loading:e.isLoadingRoles,"loading-text":e.s__("ClusterIntegration|Loading IAM Roles"),placeholder:e.s__("ClusterIntergation|Select service role"),"search-field-placeholder":e.s__("ClusterIntegration|Search IAM Roles"),"empty-text":e.s__("ClusterIntegration|No IAM Roles found"),"has-errors":Boolean(e.loadingRolesError),"error-message":e.s__("ClusterIntegration|Could not load IAM roles")},on:{input:function(t){return e.setRole({role:t})}}}),e._v(" "),r("p",{staticClass:"form-text text-muted"},[r("gl-sprintf",{attrs:{message:e.$options.i18n.roleDropdownHelpText},scopedSlots:e._u([{key:"link",fn:function(t){var n=t.content;return[r("gl-link",{attrs:{href:e.$options.i18n.roleDropdownHelpPath,target:"_blank"}},[e._v("\n            "+e._s(n)+"\n            "),r("gl-icon",{staticClass:"gl-vertical-align-middle",attrs:{name:"external-link"}})],1)]}}])})],1)],1),e._v(" "),r("gl-form-group",{attrs:{label:e.$options.i18n.regionInputLabel,description:e.$options.i18n.regionHelpText}},[r("gl-form-input",{attrs:{id:"eks-region",value:e.selectedRegion,type:"text",readonly:""}})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"label-bold",attrs:{for:"eks-key-pair"}},[e._v(e._s(e.s__("ClusterIntegration|Key pair name")))]),e._v(" "),r("cluster-form-dropdown",{attrs:{"field-id":"eks-key-pair","field-name":"eks-key-pair",value:e.selectedKeyPair,items:e.keyPairs,disabled:e.keyPairDropdownDisabled,"disabled-text":e.s__("ClusterIntegration|Select a region to choose a Key Pair"),loading:e.isLoadingKeyPairs,"loading-text":e.s__("ClusterIntegration|Loading Key Pairs"),placeholder:e.s__("ClusterIntergation|Select key pair"),"search-field-placeholder":e.s__("ClusterIntegration|Search Key Pairs"),"empty-text":e.s__("ClusterIntegration|No Key Pairs found"),"has-errors":Boolean(e.loadingKeyPairsError),"error-message":e.s__("ClusterIntegration|Could not load Key Pairs")},on:{input:function(t){return e.setKeyPair({keyPair:t})}}}),e._v(" "),r("p",{staticClass:"form-text text-muted"},[r("gl-sprintf",{attrs:{message:e.$options.i18n.keyPairDropdownHelpText},scopedSlots:e._u([{key:"link",fn:function(t){var n=t.content;return[r("gl-link",{attrs:{href:e.$options.i18n.keyPairDropdownHelpPath,target:"_blank"}},[e._v("\n            "+e._s(n)+"\n            "),r("gl-icon",{staticClass:"gl-vertical-align-middle",attrs:{name:"external-link"}})],1)]}}])})],1)],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"label-bold",attrs:{for:"eks-vpc"}},[e._v(e._s(e.s__("ClusterIntegration|VPC")))]),e._v(" "),r("cluster-form-dropdown",{attrs:{"field-id":"eks-vpc","field-name":"eks-vpc",value:e.selectedVpc,items:e.vpcs,loading:e.isLoadingVpcs,disabled:e.vpcDropdownDisabled,"disabled-text":e.s__("ClusterIntegration|Select a region to choose a VPC"),"loading-text":e.s__("ClusterIntegration|Loading VPCs"),placeholder:e.s__("ClusterIntergation|Select a VPC"),"search-field-placeholder":e.s__("ClusterIntegration|Search VPCs"),"empty-text":e.s__("ClusterIntegration|No VPCs found"),"has-errors":Boolean(e.loadingVpcsError),"error-message":e.s__("ClusterIntegration|Could not load VPCs for the selected region")},on:{input:function(t){return e.setVpcAndFetchSubnets(t)}}}),e._v(" "),r("p",{staticClass:"form-text text-muted"},[r("gl-sprintf",{attrs:{message:e.$options.i18n.vpcDropdownHelpText},scopedSlots:e._u([{key:"link",fn:function(t){var n=t.content;return[r("gl-link",{attrs:{href:e.$options.i18n.vpcDropdownHelpPath,target:"_blank"}},[e._v("\n            "+e._s(n)+"\n            "),r("gl-icon",{staticClass:"gl-vertical-align-middle",attrs:{name:"external-link"}})],1)]}}])})],1)],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"label-bold",attrs:{for:"eks-role"}},[e._v(e._s(e.s__("ClusterIntegration|Subnets")))]),e._v(" "),r("cluster-form-dropdown",{attrs:{"field-id":"eks-subnet","field-name":"eks-subnet",multiple:"",value:e.selectedSubnet,items:e.subnets,loading:e.isLoadingSubnets,disabled:e.subnetDropdownDisabled,"disabled-text":e.s__("ClusterIntegration|Select a VPC to choose a subnet"),"loading-text":e.s__("ClusterIntegration|Loading subnets"),placeholder:e.s__("ClusterIntergation|Select a subnet"),"search-field-placeholder":e.s__("ClusterIntegration|Search subnets"),"empty-text":e.s__("ClusterIntegration|No subnet found"),"has-errors":e.displaySubnetError,"error-message":e.subnetValidationErrorText},on:{input:function(t){return e.setSubnet({subnet:t})}}}),e._v(" "),r("p",{staticClass:"form-text text-muted"},[r("gl-sprintf",{attrs:{message:e.$options.i18n.subnetDropdownHelpText},scopedSlots:e._u([{key:"link",fn:function(t){var n=t.content;return[r("gl-link",{attrs:{href:e.$options.i18n.subnetDropdownHelpPath,target:"_blank"}},[e._v("\n            "+e._s(n)+"\n            "),r("gl-icon",{staticClass:"gl-vertical-align-middle",attrs:{name:"external-link"}})],1)]}}])})],1)],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"label-bold",attrs:{for:"eks-security-group"}},[e._v(e._s(e.s__("ClusterIntegration|Security group")))]),e._v(" "),r("cluster-form-dropdown",{attrs:{"field-id":"eks-security-group","field-name":"eks-security-group",value:e.selectedSecurityGroup,items:e.securityGroups,loading:e.isLoadingSecurityGroups,disabled:e.securityGroupDropdownDisabled,"disabled-text":e.s__("ClusterIntegration|Select a VPC to choose a security group"),"loading-text":e.s__("ClusterIntegration|Loading security groups"),placeholder:e.s__("ClusterIntergation|Select a security group"),"search-field-placeholder":e.s__("ClusterIntegration|Search security groups"),"empty-text":e.s__("ClusterIntegration|No security group found"),"has-errors":Boolean(e.loadingSecurityGroupsError),"error-message":e.s__("ClusterIntegration|Could not load security groups for the selected VPC")},on:{input:function(t){return e.setSecurityGroup({securityGroup:t})}}}),e._v(" "),r("p",{staticClass:"form-text text-muted"},[r("gl-sprintf",{attrs:{message:e.$options.i18n.securityGroupDropdownHelpText},scopedSlots:e._u([{key:"link",fn:function(t){var n=t.content;return[r("gl-link",{attrs:{href:e.$options.i18n.securityGroupDropdownHelpPath,target:"_blank"}},[e._v("\n            "+e._s(n)+"\n            "),r("gl-icon",{staticClass:"gl-vertical-align-middle",attrs:{name:"external-link"}})],1)]}}])})],1)],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"label-bold",attrs:{for:"eks-instance-type"}},[e._v(e._s(e.s__("ClusterIntegration|Instance type")))]),e._v(" "),r("cluster-form-dropdown",{attrs:{"field-id":"eks-instance-type","field-name":"eks-instance-type",value:e.selectedInstanceType,items:e.instanceTypes,loading:e.isLoadingInstanceTypes,"loading-text":e.s__("ClusterIntegration|Loading instance types"),placeholder:e.s__("ClusterIntergation|Select an instance type"),"search-field-placeholder":e.s__("ClusterIntegration|Search instance types"),"empty-text":e.s__("ClusterIntegration|No instance type found"),"has-errors":Boolean(e.loadingInstanceTypesError),"error-message":e.s__("ClusterIntegration|Could not load instance types")},on:{input:function(t){return e.setInstanceType({instanceType:t})}}}),e._v(" "),r("p",{staticClass:"form-text text-muted"},[r("gl-sprintf",{attrs:{message:e.$options.i18n.instanceTypesDropdownHelpText},scopedSlots:e._u([{key:"link",fn:function(t){var n=t.content;return[r("gl-link",{attrs:{href:e.$options.i18n.instanceTypesDropdownHelpPath,target:"_blank"}},[e._v("\n            "+e._s(n)+"\n            "),r("gl-icon",{staticClass:"gl-vertical-align-middle",attrs:{name:"external-link"}})],1)]}}])})],1)],1),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{staticClass:"label-bold",attrs:{for:"eks-node-count"}},[e._v(e._s(e.s__("ClusterIntegration|Number of nodes")))]),e._v(" "),r("gl-form-input",{attrs:{id:"eks-node-count",type:"number",min:"1",step:"1",value:e.nodeCount},on:{input:function(t){return e.setNodeCount({nodeCount:t})}}})],1),e._v(" "),r("div",{staticClass:"form-group"},[r("gl-form-checkbox",{attrs:{checked:e.gitlabManagedCluster},on:{input:function(t){return e.setGitlabManagedCluster({gitlabManagedCluster:t})}}},[e._v(e._s(e.s__("ClusterIntegration|GitLab-managed cluster")))]),e._v(" "),r("p",{staticClass:"form text text-muted"},[r("gl-sprintf",{attrs:{message:e.$options.i18n.gitlabManagedClusterHelpText},scopedSlots:e._u([{key:"link",fn:function(t){var n=t.content;return[r("gl-link",{attrs:{href:e.gitlabManagedClusterHelpPath,target:"_blank"}},[e._v("\n            "+e._s(n)+"\n          ")])]}}])})],1)],1),e._v(" "),r("div",{staticClass:"form-group"},[r("gl-form-checkbox",{attrs:{checked:e.namespacePerEnvironment},on:{input:function(t){return e.setNamespacePerEnvironment({namespacePerEnvironment:t})}}},[e._v(e._s(e.s__("ClusterIntegration|Namespace per environment")))]),e._v(" "),r("p",{staticClass:"form text text-muted"},[r("gl-sprintf",{attrs:{message:e.$options.i18n.namespacePerEnvironmentHelpText},scopedSlots:e._u([{key:"link",fn:function(t){var n=t.content;return[r("gl-link",{attrs:{href:e.namespacePerEnvironmentHelpPath,target:"_blank"}},[e._v("\n            "+e._s(n)+"\n          ")])]}}])})],1)],1),e._v(" "),r("div",{staticClass:"form-group"},[r("gl-button",{staticClass:"js-create-cluster",attrs:{variant:"success",category:"primary",disabled:e.createClusterButtonDisabled,loading:e.isCreatingCluster},on:{click:function(t){return e.createCluster()}}},[e._v("\n      "+e._s(e.createClusterButtonLabel)+"\n    ")])],1)],1)}),[],!1,null,null,null).exports,$=r("G3fq"),F=r.n($),z=r("dsWN"),Q=r("rK/1");function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){J(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function J(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var X={components:{GlButton:m.a,GlFormGroup:c.a,GlFormInput:u.a,GlIcon:d.a,GlLink:p.a,GlSprintf:g.a,ClipboardButton:Q.a,GlAlert:z.a},props:{accountAndExternalIdsHelpPath:{type:String,required:!0},createRoleArnHelpPath:{type:String,required:!0},externalLinkIcon:{type:String,required:!0}},i18n:{regionInputLabel:Object(O.e)("ClusterIntegration|Cluster Region"),regionHelpPath:"https://aws.amazon.com/about-aws/global-infrastructure/regions_az/",regionHelpText:Object(O.e)("ClusterIntegration|Select the region you want to create the new cluster in. Make sure you have access to this region for your role to be able to authenticate. If no region is selected, we will use %{codeStart}DEFAULT_REGION%{codeEnd}. Learn more about %{linkStart}Regions%{linkEnd}."),regionHelpTextDefaultRegion:"us-east-2"},data(){return{roleArn:this.$store.state.roleArn,selectedRegion:this.$store.state.selectedRegion}},computed:Y(Y({},Object(a.f)(["accountId","externalId","isCreatingRole","createRoleError"])),{},{submitButtonDisabled(){return this.isCreatingRole||!this.roleArn},submitButtonLabel(){return this.isCreatingRole?Object(O.a)("Authenticating"):Object(O.e)("ClusterIntegration|Authenticate with AWS")},accountAndExternalIdsHelpText(){const e=F()(this.accountAndExternalIdsHelpPath);return Object(O.f)(Object(O.e)("ClusterIntegration|Create a provision role on %{startAwsLink}Amazon Web Services %{externalLinkIcon}%{endLink} using the account and external ID above. %{startMoreInfoLink}More information%{endLink}"),{startAwsLink:'<a href="https://console.aws.amazon.com/iam/home?#roles" target="_blank" rel="noopener noreferrer">',startMoreInfoLink:'<a href="'.concat(e,'" target="_blank" rel="noopener noreferrer">'),externalLinkIcon:this.externalLinkIcon,endLink:"</a>"},!1)},provisionRoleArnHelpText(){const e=F()(this.createRoleArnHelpPath);return Object(O.f)(Object(O.e)("ClusterIntegration|The Amazon Resource Name (ARN) associated with your role. If you do not have a provision role, first create one on  %{startAwsLink}Amazon Web Services %{externalLinkIcon}%{endLink} using the above account and external IDs. %{startMoreInfoLink}More information%{endLink}"),{startAwsLink:'<a href="https://console.aws.amazon.com/iam/home?#roles" target="_blank" rel="noopener noreferrer">',startMoreInfoLink:'<a href="'.concat(e,'" target="_blank" rel="noopener noreferrer">'),externalLinkIcon:this.externalLinkIcon,endLink:"</a>"},!1)}}),methods:Y({},Object(a.c)(["createRole"]))};function Z(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var te={components:{ServiceCredentialsForm:Object(k.a)(X,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{attrs:{name:"service-credentials-form"}},[r("h4",[e._v(e._s(e.s__("ClusterIntegration|Authenticate with Amazon Web Services")))]),e._v(" "),r("p",[e._v("\n    "+e._s(e.s__("ClusterIntegration|You must grant access to your organizationâ€™s AWS resources in order to create a new EKS cluster. To grant access, create a provision role using the account and external ID below and provide us the ARN."))+"\n  ")]),e._v(" "),e.createRoleError?r("gl-alert",{staticClass:"js-invalid-credentials gl-mb-5",attrs:{variant:"danger",dismissible:!1}},[e._v("\n    "+e._s(e.createRoleError)+"\n  ")]):e._e(),e._v(" "),r("div",{staticClass:"form-row"},[r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"gitlab-account-id"}},[e._v(e._s(e.__("Account ID")))]),e._v(" "),r("div",{staticClass:"input-group"},[r("gl-form-input",{attrs:{id:"gitlab-account-id",type:"text",readonly:"",value:e.accountId}}),e._v(" "),r("div",{staticClass:"input-group-append"},[r("clipboard-button",{staticClass:"input-group-text js-copy-account-id-button",attrs:{text:e.accountId,title:e.__("Copy Account ID to clipboard")}})],1)],1)]),e._v(" "),r("div",{staticClass:"form-group col-md-6"},[r("label",{attrs:{for:"eks-external-id"}},[e._v(e._s(e.__("External ID")))]),e._v(" "),r("div",{staticClass:"input-group"},[r("gl-form-input",{attrs:{id:"eks-external-id",type:"text",readonly:"",value:e.externalId}}),e._v(" "),r("div",{staticClass:"input-group-append"},[r("clipboard-button",{staticClass:"input-group-text js-copy-external-id-button",attrs:{text:e.externalId,title:e.__("Copy External ID to clipboard")}})],1)],1)]),e._v(" "),r("div",{staticClass:"col-12 mb-3 mt-n3"},[r("p",{staticClass:"form-text text-muted",domProps:{innerHTML:e._s(e.accountAndExternalIdsHelpText)}})])]),e._v(" "),r("div",{staticClass:"form-group"},[r("label",{attrs:{for:"eks-provision-role-arn"}},[e._v(e._s(e.s__("ClusterIntegration|Provision Role ARN")))]),e._v(" "),r("gl-form-input",{attrs:{id:"eks-provision-role-arn"},model:{value:e.roleArn,callback:function(t){e.roleArn=t},expression:"roleArn"}}),e._v(" "),r("p",{staticClass:"form-text text-muted",domProps:{innerHTML:e._s(e.provisionRoleArnHelpText)}})],1),e._v(" "),r("gl-form-group",{attrs:{label:e.$options.i18n.regionInputLabel},scopedSlots:e._u([{key:"description",fn:function(){return[r("gl-sprintf",{attrs:{message:e.$options.i18n.regionHelpText},scopedSlots:e._u([{key:"code",fn:function(){return[r("code",[e._v(e._s(e.$options.i18n.regionHelpTextDefaultRegion))])]},proxy:!0},{key:"link",fn:function(t){var n=t.content;return[r("gl-link",{attrs:{href:e.$options.i18n.regionHelpPath,target:"_blank"}},[e._v("\n            "+e._s(n)+"\n            "),r("gl-icon",{attrs:{name:"external-link"}})],1)]}}])})]},proxy:!0}])},[r("gl-form-input",{attrs:{id:"eks-region",type:"text"},model:{value:e.selectedRegion,callback:function(t){e.selectedRegion=t},expression:"selectedRegion"}})],1),e._v(" "),r("gl-button",{attrs:{variant:"success",category:"primary",type:"submit",disabled:e.submitButtonDisabled,loading:e.isCreatingRole},on:{click:function(t){return t.preventDefault(),e.createRole({roleArn:e.roleArn,selectedRegion:e.selectedRegion,externalId:e.externalId})}}},[e._v("\n    "+e._s(e.submitButtonLabel)+"\n  ")])],1)}),[],!1,null,null,null).exports,EksClusterConfigurationForm:U},props:{gitlabManagedClusterHelpPath:{type:String,required:!0},namespacePerEnvironmentHelpPath:{type:String,required:!0},kubernetesIntegrationHelpPath:{type:String,required:!0},accountAndExternalIdsHelpPath:{type:String,required:!0},createRoleArnHelpPath:{type:String,required:!0},externalLinkIcon:{type:String,required:!0}},computed:function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Z(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Z(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},Object(a.f)(["hasCredentials"]))},re=Object(k.a)(te,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"js-create-eks-cluster"},[e.hasCredentials?r("eks-cluster-configuration-form",{attrs:{"gitlab-managed-cluster-help-path":e.gitlabManagedClusterHelpPath,"namespace-per-environment-help-path":e.namespacePerEnvironmentHelpPath,"kubernetes-integration-help-path":e.kubernetesIntegrationHelpPath,"external-link-icon":e.externalLinkIcon}}):r("service-credentials-form",{attrs:{"create-role-arn-help-path":e.createRoleArnHelpPath,"account-and-external-ids-help-path":e.accountAndExternalIdsHelpPath,"external-link-icon":e.externalLinkIcon}})],1)}),[],!1,null,null,null).exports;r("EWC9");var ne=r("oVc2"),se={REQUEST_ITEMS(e){e.isLoadingItems=!0,e.loadingItemsError=null},REQUEST_ITEMS_SUCCESS(e,t){let{items:r}=t;e.isLoadingItems=!1,e.items=r},RECEIVE_ITEMS_ERROR(e,t){let{error:r}=t;e.isLoadingItems=!1,e.loadingItemsError=r}};var oe=function(e){let{fetchFn:t,initialState:r}=e;return{actions:(n=t,{requestItems:function(e){let{commit:t}=e;return t("REQUEST_ITEMS")},receiveItemsSuccess:function(e,t){let{commit:r}=e;return r("REQUEST_ITEMS_SUCCESS",t)},receiveItemsError:function(e,t){let{commit:r}=e;return r("RECEIVE_ITEMS_ERROR",t)},fetchItems:function(e,t){let{dispatch:r}=e;return r("requestItems"),n(t).then((function(e){return r("receiveItemsSuccess",{items:e})})).catch((function(e){return r("receiveItemsError",{error:e})}))}}),getters:ne,mutations:se,state:Object.assign({isLoadingItems:!1,items:[],loadingItemsError:null},r||{})};var n},ae=r("dLdN"),ie=r.n(ae),le=r("E/96"),ce=r.n(le),ue=r("3WzH"),de=r.n(ue);const pe=function(e){let{Tags:t,VpcId:r}=e;const n=t.find((function(e){let{Key:t}=e;return"Name"===t}));return n?n.Value:r},ge=function(){return(new ce.a).listRoles().promise().then((function(e){let{Roles:t}=e;return t.map((function(e){let{RoleName:t,Arn:r}=e;return{name:t,value:r}}))}))},me=function(e){let{region:t}=e;return new ie.a({region:t}).describeKeyPairs().promise().then((function(e){let{KeyPairs:t}=e;return t.map((function(e){let{KeyName:t}=e;return{name:t,value:t}}))}))},fe=function(e){let{region:t}=e;return new ie.a({region:t}).describeVpcs().promise().then((function(e){let{Vpcs:t}=e;return t.map((function(e){return{value:e.VpcId,name:pe(e)}}))}))},be=function(e){let{vpc:t,region:r}=e;return new ie.a({region:r}).describeSubnets({Filters:[{Name:"vpc-id",Values:[t]}]}).promise().then((function(e){let{Subnets:t}=e;return t.map((function(e){let{SubnetId:t}=e;return{value:t,name:t}}))}))},he=function(e){let{region:t,vpc:r}=e;return new ie.a({region:t}).describeSecurityGroups({Filters:[{Name:"vpc-id",Values:[r]}]}).promise().then((function(e){let{SecurityGroups:t}=e;return t.map((function(e){let{GroupName:t,GroupId:r}=e;return{name:t,value:r}}))}))};var _e=r("XRO8"),ve=r("2ibD");function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Ce(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ye(Object(r),!0).forEach((function(t){Ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ee(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Se=function(e,t){let{commit:r}=e;r("SET_CLUSTER_NAME",t)},Ie=function(e,t){let{commit:r}=e;r("SET_ENVIRONMENT_SCOPE",t)},ke=function(e,t){let{commit:r}=e;r("SET_KUBERNETES_VERSION",t)},Pe=function(e,t){let{dispatch:r,state:{createRolePath:n}}=e;r("requestCreateRole");const s=t.selectedRegion||"us-east-2";return ve.a.post(n,{role_arn:t.roleArn,role_external_id:t.externalId,region:s}).then((function(e){let{data:t}=e;const n=Ce(Ce({},Object(i.h)(t)),{},{region:s});r("createRoleSuccess",n)})).catch((function(e){var t,n;let s=e;(null==e?void 0:null===(t=e.response)||void 0===t?void 0:null===(n=t.data)||void 0===n?void 0:n.message)&&(s=e.response.data.message),r("createRoleError",{error:s})}))},Oe=function(e){let{commit:t}=e;t("REQUEST_CREATE_ROLE")},Re=function(e,t){let{dispatch:r,commit:n}=e;r("setRegion",{region:t.region}),function(e){let{awsCredentials:t}=e;de.a.config=t}({awsCredentials:t}),n("CREATE_ROLE_SUCCESS")},xe=function(e,t){let{commit:r}=e;r("CREATE_ROLE_ERROR",t)},we=function(e){let{dispatch:t,state:r}=e;return t("requestCreateCluster"),ve.a.post(r.createClusterPath,{name:r.clusterName,environment_scope:r.environmentScope,managed:r.gitlabManagedCluster,namespace_per_environment:r.namespacePerEnvironment,provider_aws_attributes:{kubernetes_version:r.kubernetesVersion,region:r.selectedRegion,vpc_id:r.selectedVpc,subnet_ids:r.selectedSubnet,role_arn:r.selectedRole,key_name:r.selectedKeyPair,security_group_id:r.selectedSecurityGroup,instance_type:r.selectedInstanceType,num_nodes:r.nodeCount}}).then((function(e){let{headers:{location:r}}=e;return t("createClusterSuccess",r)})).catch((function(e){let{response:{data:r}}=e;t("createClusterError",r)}))},Te=function(e){let{commit:t}=e;t("REQUEST_CREATE_CLUSTER")},je=function(e,t){window.location.assign(t)},Ae=function(e,t){let{commit:r}=e;var n;r("CREATE_CLUSTER_ERROR",t),Object(_e.c)((n=t)[Object.keys(n)[0]][0])},Le=function(e,t){let{commit:r}=e;r("SET_REGION",t)},De=function(e,t){let{commit:r}=e;r("SET_KEY_PAIR",t)},Ne=function(e,t){let{commit:r}=e;r("SET_VPC",t)},Ve=function(e,t){let{commit:r}=e;r("SET_SUBNET",t)},He=function(e,t){let{commit:r}=e;r("SET_ROLE",t)},Ge=function(e,t){let{commit:r}=e;r("SET_SECURITY_GROUP",t)},Me=function(e,t){let{commit:r}=e;r("SET_GITLAB_MANAGED_CLUSTER",t)},Ke=function(e,t){let{commit:r}=e;r("SET_NAMESPACE_PER_ENVIRONMENT",t)},qe=function(e,t){let{commit:r}=e;r("SET_INSTANCE_TYPE",t)},Be=function(e,t){let{commit:r}=e;r("SET_NODE_COUNT",t)},Ue=function(e){let{selectedSubnet:t}=e;return Array.isArray(t)&&t.length>=2};var $e={SET_CLUSTER_NAME(e,t){let{clusterName:r}=t;e.clusterName=r},SET_ENVIRONMENT_SCOPE(e,t){let{environmentScope:r}=t;e.environmentScope=r},SET_KUBERNETES_VERSION(e,t){let{kubernetesVersion:r}=t;e.kubernetesVersion=r},SET_REGION(e,t){let{region:r}=t;e.selectedRegion=r},SET_KEY_PAIR(e,t){let{keyPair:r}=t;e.selectedKeyPair=r},SET_VPC(e,t){let{vpc:r}=t;e.selectedVpc=r},SET_SUBNET(e,t){let{subnet:r}=t;e.selectedSubnet=r},SET_ROLE(e,t){let{role:r}=t;e.selectedRole=r},SET_SECURITY_GROUP(e,t){let{securityGroup:r}=t;e.selectedSecurityGroup=r},SET_INSTANCE_TYPE(e,t){let{instanceType:r}=t;e.selectedInstanceType=r},SET_NODE_COUNT(e,t){let{nodeCount:r}=t;e.nodeCount=r},SET_GITLAB_MANAGED_CLUSTER(e,t){let{gitlabManagedCluster:r}=t;e.gitlabManagedCluster=r},SET_NAMESPACE_PER_ENVIRONMENT(e,t){let{namespacePerEnvironment:r}=t;e.namespacePerEnvironment=r},REQUEST_CREATE_ROLE(e){e.isCreatingRole=!0,e.createRoleError=null,e.hasCredentials=!1},CREATE_ROLE_SUCCESS(e){e.isCreatingRole=!1,e.createRoleError=null,e.hasCredentials=!0},CREATE_ROLE_ERROR(e,t){let{error:r}=t;e.isCreatingRole=!1,e.createRoleError=r,e.hasCredentials=!1},REQUEST_CREATE_CLUSTER(e){e.isCreatingCluster=!0,e.createClusterError=null},CREATE_CLUSTER_ERROR(e,t){let{error:r}=t;e.isCreatingCluster=!1,e.createClusterError=r}};const Fe=R.find((function(e){return e.default})).value;function ze(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Qe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ze(Object(r),!0).forEach((function(t){We(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ze(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function We(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ye=function(e){let{initialState:t}=e;return new a.b.Store({actions:n,getters:s,mutations:$e,state:Object.assign({createRolePath:null,isCreatingRole:!1,roleCreated:!1,createRoleError:!1,accountId:"",externalId:"",roleArn:"",clusterName:"",environmentScope:"*",kubernetesVersion:Fe,selectedRegion:"",selectedRole:"",selectedKeyPair:"",selectedVpc:"",selectedSubnet:[],selectedSecurityGroup:"",selectedInstanceType:"m5.large",nodeCount:"3",isCreatingCluster:!1,createClusterError:!1,gitlabManagedCluster:!0,namespacePerEnvironment:!0},t),modules:{roles:Qe({namespaced:!0},oe({fetchFn:ge})),keyPairs:Qe({namespaced:!0},oe({fetchFn:me})),vpcs:Qe({namespaced:!0},oe({fetchFn:fe})),subnets:Qe({namespaced:!0},oe({fetchFn:be})),securityGroups:Qe({namespaced:!0},oe({fetchFn:he})),instanceTypes:Qe({namespaced:!0},oe({initialState:{items:t.instanceTypes}}))}})};o.default.use(a.b);t.default=function(e){const{gitlabManagedClusterHelpPath:t,namespacePerEnvironmentHelpPath:r,kubernetesIntegrationHelpPath:n,accountAndExternalIdsHelpPath:s,createRoleArnHelpPath:a,externalId:l,accountId:c,instanceTypes:u,hasCredentials:d,createRolePath:p,createClusterPath:g,externalLinkIcon:m,roleArn:f}=e.dataset;return new o.default({el:e,store:Ye({initialState:{hasCredentials:Object(i.K)(d),externalId:l,accountId:c,instanceTypes:JSON.parse(u),createRolePath:p,createClusterPath:g,roleArn:f}}),components:{CreateEksCluster:re},render:e=>e("create-eks-cluster",{props:{gitlabManagedClusterHelpPath:t,namespacePerEnvironmentHelpPath:r,kubernetesIntegrationHelpPath:n,accountAndExternalIdsHelpPath:s,createRoleArnHelpPath:a,externalLinkIcon:m}})})}}}]);
//# sourceMappingURL=eks_cluster.b116f14d.chunk.js.map